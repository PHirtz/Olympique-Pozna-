import"./DsnmJJEf.js";import"./69_IOA4Y.js";import{c as Ve,o as qe}from"./CpWiCzCL.js";import{f as _e,a as He,b as Be,o as v,V as z,m as e,a7 as t,a9 as a,aa as s,d as P,ad as Re,u as U,ae as fe,a8 as D,au as u}from"./DCkW3Mu1.js";import{s as I,e as ee}from"./DrSB0OLp.js";import{I as he,e as Xe,i as Ge}from"./K0__0awE.js";import{i as re}from"./Bht1pefN.js";import{c as we,a as g,f as x}from"./BOH49W78.js";import{r as y,c as Je,s as Ke}from"./Cje3Gi54.js";import{b as f,a as Qe}from"./DqSjqjGX.js";import{p as Te}from"./D4Caz1gY.js";import{i as We}from"./Dm1SwslI.js";import{l as ke,s as $e,p as ye}from"./DhWTIj6G.js";import{g as xe}from"./B64nsWs5.js";import{g as Ye,c as Ze,u as er}from"./-VCzV--l.js";import{X as rr}from"./DUyr6-Vh.js";import{s as Pe}from"./DwbAyKq7.js";function ar(_,c){const b=ke(c,["children","$$slots","$$events","$$legacy"]);const m=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];he(_,$e({name:"image"},()=>b,{get iconNode(){return m},children:(r,h)=>{var i=we(),p=_e(i);Pe(p,c,"default",{}),g(r,i)},$$slots:{default:!0}}))}function tr(_,c){const b=ke(c,["children","$$slots","$$events","$$legacy"]);const m=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];he(_,$e({name:"save"},()=>b,{get iconNode(){return m},children:(r,h)=>{var i=we(),p=_e(i);Pe(p,c,"default",{}),g(r,i)},$$slots:{default:!0}}))}var sr=x('<div class="bg-white rounded-lg shadow-sm p-12 text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-4 text-gray-600">Chargement...</p></div>'),or=x('<div class="mx-6 mt-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg"> </div>'),ir=x("<option> </option>"),lr=x('<div class="p-4 bg-gray-50 rounded-lg border border-gray-200"><p class="text-sm text-gray-600 mb-2 flex items-center gap-2"><!> Aperçu du logo</p> <div class="bg-white p-4 rounded flex items-center justify-center" style="min-height: 150px;"><img alt="Aperçu logo" class="max-h-32 max-w-full object-contain"/></div></div>'),dr=x(`<div class="bg-white rounded-lg shadow-sm"><form><div class="px-6 py-4 border-b border-gray-200"><h2 class="text-xl font-semibold text-gray-800"> </h2></div> <!> <div class="p-6 space-y-6"><div><h3 class="text-lg font-medium text-gray-800 mb-4">Informations générales</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="md:col-span-2"><label for="name" class="block text-sm font-medium text-gray-700 mb-2">Nom du sponsor *</label> <input id="name" type="text" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100" placeholder="Ex: Le Petit Paris"/></div> <div><label for="category" class="block text-sm font-medium text-gray-700 mb-2">Catégorie *</label> <select id="category" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100"></select></div> <div><label for="websiteUrl" class="block text-sm font-medium text-gray-700 mb-2">Site web</label> <input id="websiteUrl" type="url" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100" placeholder="https://exemple.com"/></div></div></div> <div><h3 class="text-lg font-medium text-gray-800 mb-4">Descriptions</h3> <div class="space-y-4"><div><label for="description_fr" class="block text-sm font-medium text-gray-700 mb-2">Description (Français)</label> <textarea id="description_fr" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100" placeholder="Description du sponsor en français..."></textarea></div> <div><label for="description_pl" class="block text-sm font-medium text-gray-700 mb-2">Description (Polonais)</label> <textarea id="description_pl" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100" placeholder="Opis partnera w języku polskim..."></textarea></div></div></div> <div><h3 class="text-lg font-medium text-gray-800 mb-4">Logo</h3> <div class="space-y-4"><div><label for="logoUrl" class="block text-sm font-medium text-gray-700 mb-2">URL du logo</label> <input id="logoUrl" type="url" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100" placeholder="https://exemple.com/logo.png"/></div> <div><label for="logoPath" class="block text-sm font-medium text-gray-700 mb-2">Chemin local du logo</label> <input id="logoPath" type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100" placeholder="/images/sponsors/logo.png"/></div> <!></div></div> <div><h3 class="text-lg font-medium text-gray-800 mb-4">Paramètres d'affichage</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="displayOrder" class="block text-sm font-medium text-gray-700 mb-2">Ordre d'affichage</label> <input id="displayOrder" type="number" min="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100"/> <p class="text-xs text-gray-500 mt-1">Plus le nombre est petit, plus le sponsor apparaît en premier</p></div> <div><span class="block text-sm font-medium text-gray-700 mb-2">Statut</span> <label class="flex items-center gap-3 cursor-pointer"><input type="checkbox" class="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"/> <span class="text-gray-700">Sponsor actif (visible sur le site)</span></label></div></div></div></div> <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-end gap-3"><button type="button" class="flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition disabled:opacity-50"><!> <span>Annuler</span></button> <button type="submit" class="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition disabled:opacity-50"><!> <span> </span></button></div></form></div>`),nr=x('<section class="fm-container svelte-mt43fw"><!></section>');function Sr(_,c){He(c,!1);let b=ye(c,"mode",8,"create"),m=ye(c,"sponsorId",8,null);Ve();let r=z({name:"",category:"partner",websiteUrl:"",description_fr:"",description_pl:"",logoUrl:"",logoPath:"",displayOrder:0,isActive:!0}),h=z(!1),i=z(!1),p=z("");const Ue=[{value:"main_sponsor",label:"Sponsor Principal"},{value:"supplier",label:"Fournisseur"}];qe(async()=>{b()==="edit"&&m()&&await Se()});async function Se(){try{v(h,!0);const d=await Ye(m());v(r,{...e(r),...d.data})}catch(d){v(p,"Erreur lors du chargement du sponsor"),console.error(d)}finally{v(h,!1)}}async function ze(){v(p,""),v(i,!0);try{b()==="create"?await Ze(e(r)):await er(m(),e(r)),xe("/admin")}catch(d){v(p,d.message||"Erreur lors de l'enregistrement"),console.error(d)}finally{v(i,!1)}}function De(){xe("/admin")}We();var O=nr(),Ie=t(O);{var Oe=d=>{var w=sr();g(d,w)},Ae=d=>{var w=dr(),A=t(w),E=t(A),ae=t(E),Ee=t(ae,!0);a(ae),a(E);var te=s(E,2);{var Ne=o=>{var l=or(),n=t(l,!0);a(l),P(()=>I(n,e(p))),g(o,l)};re(te,o=>{e(p)&&o(Ne)})}var N=s(te,2),M=t(N),se=s(t(M),2),j=t(se),C=s(t(j),2);y(C),a(j);var L=s(j,2),S=s(t(L),2);P(()=>{e(r),Re(()=>{e(i)})}),Xe(S,5,()=>Ue,Ge,(o,l)=>{var n=ir(),Z=t(n,!0);a(n);var $={};P(()=>{I(Z,(e(l),U(()=>e(l).label))),$!==($=(e(l),U(()=>e(l).value)))&&(n.value=(n.__value=(e(l),U(()=>e(l).value)))??"")}),g(o,n)}),a(S),a(L);var oe=s(L,2),F=s(t(oe),2);y(F),a(oe),a(se),a(M);var V=s(M,2),ie=s(t(V),2),q=t(ie),H=s(t(q),2);fe(H),a(q);var le=s(q,2),B=s(t(le),2);fe(B),a(le),a(ie),a(V);var R=s(V,2),de=s(t(R),2),X=t(de),G=s(t(X),2);y(G),a(X);var J=s(X,2),K=s(t(J),2);y(K),a(J);var Me=s(J,2);{var je=o=>{var l=lr(),n=t(l),Z=t(n);ar(Z,{size:16}),D(),a(n);var $=s(n,2),me=t($);a($),a(l),P(()=>Ke(me,"src",(e(r),U(()=>e(r).logoUrl)))),ee("error",me,Fe=>Fe.target.src=""),g(o,l)};re(Me,o=>{e(r),U(()=>e(r).logoUrl)&&o(je)})}a(de),a(R);var ne=s(R,2),ce=s(t(ne),2),Q=t(ce),T=s(t(Q),2);y(T),D(2),a(Q);var pe=s(Q,2),ue=s(t(pe),2),W=t(ue);y(W),D(2),a(ue),a(pe),a(ce),a(ne),a(N);var ve=s(N,2),k=t(ve),Ce=t(k);rr(Ce,{size:18}),D(2),a(k);var Y=s(k,2),ge=t(Y);tr(ge,{size:18});var be=s(ge,2),Le=t(be,!0);a(be),a(Y),a(ve),a(A),a(w),P(()=>{I(Ee,b()==="create"?"Nouveau sponsor":"Modifier le sponsor"),C.disabled=e(i),S.disabled=e(i),F.disabled=e(i),H.disabled=e(i),B.disabled=e(i),G.disabled=e(i),K.disabled=e(i),T.disabled=e(i),W.disabled=e(i),k.disabled=e(i),Y.disabled=e(i),I(Le,e(i)?"Enregistrement...":"Enregistrer")}),f(C,()=>e(r).name,o=>u(r,e(r).name=o)),Je(S,()=>e(r).category,o=>u(r,e(r).category=o)),f(F,()=>e(r).websiteUrl,o=>u(r,e(r).websiteUrl=o)),f(H,()=>e(r).description_fr,o=>u(r,e(r).description_fr=o)),f(B,()=>e(r).description_pl,o=>u(r,e(r).description_pl=o)),f(G,()=>e(r).logoUrl,o=>u(r,e(r).logoUrl=o)),f(K,()=>e(r).logoPath,o=>u(r,e(r).logoPath=o)),f(T,()=>e(r).displayOrder,o=>u(r,e(r).displayOrder=o)),Qe(W,()=>e(r).isActive,o=>u(r,e(r).isActive=o)),ee("click",k,De),ee("submit",A,Te(ze)),g(d,w)};re(Ie,d=>{e(h)?d(Oe):d(Ae,!1)})}a(O),g(_,O),Be()}export{Sr as S};
